#version 140

in vec2 textureCoords;

out vec4 out_Color;

uniform sampler2D guiTexture;
uniform sampler2D healthMap;
uniform float hasHealthMap;
uniform float healthFactor;
uniform float translucentFactor;
uniform int topPixel;
uniform int bottomPixel;

void main(void){

	if(gl_FragCoord.y > topPixel){
		discard;
	}
	
	if(gl_FragCoord.y < bottomPixel){
		discard;
	}
	
	if(hasHealthMap > 0){
		float currentHealthFactor = texture(healthMap, textureCoords).r;
		if(currentHealthFactor > healthFactor){
			discard;
		}
	}

	out_Color = vec4(texture(guiTexture,textureCoords));
	if (out_Color.a != 0){
		out_Color.a = translucentFactor;
	}
	
}